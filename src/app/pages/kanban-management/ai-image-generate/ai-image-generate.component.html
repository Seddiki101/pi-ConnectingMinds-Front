<!-- Container fluid -->
<section class="container-fluid px-0">
    <!-- row -->
    <div class="row g-0">
      <div class="col-xl-12 col-lg-12 col-md-12 col-12">
        <!-- chat list -->
        <div class="chat-body w-100 vh-100">
          <div
            *ngIf="selectedConversation"
            class="px-4 py-4 vh-100 overflow-hidden"
          >
            <div
              #chatContainer
              name="chatContainer"
              id="chatContainer"
              style="
                max-height: calc(100vh - 50px);
                overflow-y: auto;
                padding-bottom: 15px;
              "
            >
              <ng-container
                *ngFor="
                  let message of selectedConversation.messages.slice(2);
                  let last = last
                "
              >
                <!-- Assistant Message -->
                <div
                  *ngIf="message.role === 'assistant'"
                  class="d-flex w-lg-60 mb-4"
                >
                  <img
                    src="../../assets/chat/chatbot.jpg"
                    alt="botChat"
                    class="rounded-circle avatar-md"
                  />
                  <div class="ms-3">
                    <div class="d-flex">
                      <div class="card mt-2 rounded-top-md-left-0">
                        <div class="card-body p-3">
                          <p class="mb-0 text-dark">{{ message.content }}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- User Message -->
                <div
                  *ngIf="message.role === 'user'"
                  class="d-flex justify-content-end mb-4"
                >
                  <div class="d-flex w-lg-60">
                    <div class="me-3 text-end">
                      <div class="d-flex">
                        <div
                          class="card mt-2 rounded-top-md-end-0 bg-primary text-white"
                        >
                          <div class="card-body text-start p-3">
                            <p class="mb-0">{{ message.content }}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <img
                      src="../../assets/chat/userChat.jpg"
                      alt="userChat"
                      class="rounded-circle avatar-md"
                    />
                  </div>
                </div>
              </ng-container>
            </div>
          </div>
          <!-- chart footer -->
          <div class="bg-light px-4 py-3 chat-footer mt-auto">
            <div class="bg-white p-2 rounded-3 shadow-sm">
              <form (ngSubmit)="sendMessage()">
                <div class="position-relative">
                  <input
                    class="form-control border-0 form-control-simple no-resize"
                    placeholder="Type a New Message"
                    type="text"
                    rows="1"
                    name="message"
                    id="message"
                    [(ngModel)]="messageToSend"
                    autocomplete="off"
                  />
                </div>
                <div class="position-absolute end-0 mt-n7 me-4">
                  <button
                    type="submit"
                    class="fs-3 btn text-primary btn-focus-none"
                  >
                    <i class="fe fe-send"></i>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
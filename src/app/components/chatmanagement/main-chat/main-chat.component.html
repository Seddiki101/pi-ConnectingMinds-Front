<!-- chat list -->
<div class="chat-body w-100 vh-100" data-simplebar="">
    <app-user-details></app-user-details>
    <div class="px-4 py-4 vh-100 overflow-hidden">
        <!-- media, ngFor to loop through messages -->
        <ng-container *ngFor="let message of chatData?.messages">
            <div *ngIf="message.userId === thisUserId; else otherUserMessage" class="d-flex justify-content-end mb-4">
                <!-- Right-aligned message for thisUserId -->
                <div class="d-flex w-lg-40">
                    <div class="me-3 text-end">
                        <small>{{ message.timestamp | date:'shortTime' }}</small>
                        <div class="d-flex">
                            <div class="me-2 mt-2">
                                <!-- dropdown -->
                                <div class="dropdown dropstart">
                                    <a class="text-link" href="#" role="button" id="dropdownMenuLinkTwo" data-bs-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLinkTwo">
                                        <a class="dropdown-item" href="#"><i class="fe fe-copy dropdown-item-icon"></i>Copy</a>
                                        <a class="dropdown-item" href="#"><i class="fe fe-edit dropdown-item-icon"></i>Edit</a>
                                        <a class="dropdown-item" href="#"><i class="fe fe-corner-up-right dropdown-item-icon"></i>Reply</a>
                                        <a class="dropdown-item" href="#"><i class="fe fe-trash dropdown-item-icon"></i>Delete</a>
                                    </div>
                                </div>
                            </div>
                            <!-- card -->
                            <div class="card mt-2 rounded-top-md-end-0 bg-primary text-white">
                                <div class="card-body text-start p-3">
                                    <p class="mb-0">{{ message.content }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- img -->
                    <img src="../../../../assets/images/avatar/avatar-1.jpg" alt="" class="rounded-circle avatar-md" />
                </div>
            </div>
            <!-- Other users' messages -->
            <ng-template #otherUserMessage>
                <div class="d-flex w-lg-40 mb-4">
                    <img src="../../../../assets/images/avatar/avatar-4.jpg" alt="" class="rounded-circle avatar-md" />
                    <div class="ms-3">
                        <small>{{ message.timestamp | date:'shortTime' }}</small>
                        <div class="d-flex">
                            <div class="card mt-2 rounded-top-md-left-0">
                                <div class="card-body p-3">
                                    <p class="mb-0 text-dark">{{ message.content }}</p>
                                </div>
                            </div>
                            <div class="ms-2 mt-2">
                                <!-- dropdown -->
                                <div class="dropdown dropend">
                                    <a class="text-link" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                        <a class="dropdown-item" href="#"><i class="fe fe-copy dropdown-item-icon"></i>Copy</a>
                                        <a class="dropdown-item" href="#"><i class="fe fe-corner-up-right dropdown-item-icon"></i>Reply</a>
                                        <a class="dropdown-item" href="#"><i class="fe fe-corner-up-left dropdown-item-icon"></i>Forward</a>
                                        <a class="dropdown-item" href="#"><i class="fe fe-star dropdown-item-icon"></i>Favourite</a>
                                        <a class="dropdown-item" href="#"><i class="fe fe-trash dropdown-item-icon"></i>Delete</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </ng-container>
    </div>
    <!-- chart footer -->
    <div class="bg-light px-4 py-3 chat-footer mt-auto">
        <div class="bg-white p-2 rounded-3 shadow-sm">
            <form #messageForm (ngSubmit)="sendMessage()">
                <div class="position-relative">
                    <textarea class="form-control border-0 form-control-simple no-resize" placeholder="Type a New Message" rows="1" name="newMessage" [(ngModel)]="newMessage"></textarea>

                </div>
                <div class="position-absolute end-0 mt-n7 me-4">
                    <button type="submit" class="fs-3 btn text-primary btn-focus-none">
                        <i class="fe fe-send"></i>
                    </button>
                </div>
            </form>
        </div>
        <div class="mt-3 d-flex">
            <div>
                <a href="#" class="text-link me-2 fs-4"><i class="bi-emoji-smile"></i></a>
                <a href="#" class="text-link me-2 fs-4"><i class="bi-paperclip"></i></a>
                <a href="#" class="text-link me-3 fs-4"><i class="bi-mic"></i></a>
            </div>
            <div class="dropdown">
                <a href="#" class="text-link fs-4" id="moreAction" data-bs-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">
                    <i class="fe fe-more-horizontal"></i>
                </a>
                <div class="dropdown-menu" aria-labelledby="moreAction">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                </div>
            </div>
        </div>
    </div>
</div>